<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SECOP Cloud - Sistema de Control</title>
    <!-- Frameworks -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Firebase Compat SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <!-- Iconos y Utilidades -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        select { appearance: none; -webkit-appearance: none; }
    </style>
</head>
<body class="bg-[#f8fafc] text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const firebaseConfig = JSON.parse(window.__firebase_config || '{}');
        const appId = window.__app_id || 'secop-bolivar-v1';
        
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        
        const auth = firebase.auth();
        const db = firebase.firestore();
        const { useState, useEffect, useMemo, useRef } = React;

        const Icon = ({ name, className }) => {
            const iconRef = useRef(null);
            useEffect(() => {
                if (window.lucide && iconRef.current) {
                    iconRef.current.innerHTML = '';
                    const icon = document.createElement('i');
                    const lucideName = name.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();
                    icon.setAttribute('data-lucide', lucideName);
                    if (className) icon.className = className;
                    iconRef.current.appendChild(icon);
                    window.lucide.createIcons();
                }
            }, [name, className]);
            return <span ref={iconRef} className="inline-flex items-center" />;
        };

        const MONTHS = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
        const ACCESS_KEYS = { supervisor: "sup123", financiera: "fin456" };

        function App() {
            const [user, setUser] = useState(null);
            const [role, setRole] = useState(null);
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [loginForm, setLoginForm] = useState({ role: 'supervisor', password: '' });
            
            const [loading, setLoading] = useState(false);
            const [instructors, setInstructors] = useState([]);
            const [supervision, setSupervision] = useState({});
            const [view, setView] = useState('dashboard');
            const [month, setMonth] = useState(MONTHS[new Date().getMonth()]);
            const [search, setSearch] = useState('');
            const [uploading, setUploading] = useState(null); 

            const [showModal, setShowModal] = useState(false);
            const [showBulkInstructorModal, setShowBulkInstructorModal] = useState(false);
            const [showBulkHoursModal, setShowBulkHoursModal] = useState(false);
            const [bulkText, setBulkText] = useState("");
            const [isEditing, setIsEditing] = useState(false);
            const [originalCC, setOriginalCC] = useState(null);
            const [instructorForm, setInstructorForm] = useState({ name: '', cc: '', contract: 'CONTRATISTA SENA' });

            useEffect(() => {
                const initAuth = async () => {
                    try {
                        if (window.__initial_auth_token) await auth.signInWithCustomToken(window.__initial_auth_token);
                        else await auth.signInAnonymously();
                    } catch (e) { console.error("Error Auth:", e); }
                };
                initAuth();
                const unsubscribe = auth.onAuthStateChanged(setUser);
                return () => unsubscribe();
            }, []);

            useEffect(() => {
                if (!user || !isLoggedIn) return;
                setLoading(true);
                const baseDoc = db.collection('artifacts').doc(appId).collection('public').doc('data');
                
                const unsubI = baseDoc.collection('instructors').onSnapshot(s => {
                    setInstructors(s.docs.map(d => ({ id: d.id, ...d.data() })));
                    setLoading(false);
                }, e => setLoading(false));

                const unsubS = baseDoc.collection('supervision').onSnapshot(s => {
                    const obj = {};
                    s.docs.forEach(d => { obj[d.id] = d.data(); });
                    setSupervision(obj);
                });

                return () => { unsubI(); unsubS(); };
            }, [user, isLoggedIn]);

            const handleLogin = (e) => {
                e.preventDefault();
                if (ACCESS_KEYS[loginForm.role] === loginForm.password) {
                    setRole(loginForm.role);
                    setIsLoggedIn(true);
                } else alert('Código incorrecto');
            };

            const handleUpdateStatus = async (cc, field, value) => {
                if (!user) return;
                const docId = `${month}-${cc}`;
                const ref = db.collection('artifacts').doc(appId).collection('public').doc('data').collection('supervision').doc(docId);
                const current = supervision[docId] || { gcStatus: 'pending', gfStatus: 'pending', hours: 0 };
                try {
                    await ref.set({ ...current, [field]: value, updatedAt: Date.now() }, { merge: true });
                } catch (e) { console.error("Update Error:", e); }
            };

            // CARGA MASIVA DE HORAS POR TEXTO (COPIAR Y PEGAR CC Y HORAS)
            const handleBulkHoursSave = async () => {
                if (!bulkText.trim()) return;
                setLoading(true);
                const batch = db.batch();
                const baseRef = db.collection('artifacts').doc(appId).collection('public').doc('data').collection('supervision');
                
                const lines = bulkText.split('\n');
                let count = 0;

                lines.forEach(line => {
                    const parts = line.split(/[\t,;| ]+/).map(p => p.trim()).filter(p => p !== "");
                    
                    let cc = parts.find(p => /^\d{6,}$/.test(p));
                    let hours = parts.find(p => p !== cc && !isNaN(parseFloat(p)));

                    if (cc && hours) {
                        const hVal = parseFloat(hours);
                        // GC se auto-aprueba si horas >= 160. 
                        // GF ahora siempre queda en 'pending' por solicitud.
                        const autoApproveGC = hVal >= 160;
                        const docId = `${month}-${cc}`;
                        const ref = baseRef.doc(docId);
                        
                        batch.set(ref, {
                            hours: hVal,
                            gcStatus: autoApproveGC ? 'verified' : 'pending',
                            gfStatus: 'pending', // No se valida con las horas, requiere acción manual de Financiera
                            updatedAt: Date.now()
                        }, { merge: true });
                        count++;
                    }
                });

                try {
                    if (count > 0) {
                        await batch.commit();
                        alert(`¡Horas cargadas! Se actualizaron ${count} registros para ${month}. Recuerde que Financiera debe validar manualmente.`);
                        setBulkText("");
                        setShowBulkHoursModal(false);
                    } else {
                        alert("No se detectaron datos válidos. Use el formato: Cédula Horas");
                    }
                } catch (e) { alert("Error al guardar."); } finally { setLoading(false); }
            };

            // CARGA MASIVA DE INSTRUCTORES POR TEXTO
            const handleBulkInstructorSave = async () => {
                if (!bulkText.trim()) return;
                setLoading(true);
                const batch = db.batch();
                const baseRef = db.collection('artifacts').doc(appId).collection('public').doc('data').collection('instructors');
                
                const lines = bulkText.split('\n');
                let count = 0;

                lines.forEach(line => {
                    const parts = line.split(/[\t,;|]/).map(p => p.trim()).filter(p => p !== "");
                    let cc = parts.find(p => /^\d{5,}$/.test(p));
                    let nameParts = parts.filter(p => p !== cc);
                    let name = nameParts.join(" ").toUpperCase();

                    if (cc && name) {
                        const instRef = baseRef.doc(cc);
                        batch.set(instRef, {
                            name: name,
                            cc: cc,
                            contract: 'CONTRATISTA SENA',
                            updatedAt: Date.now()
                        }, { merge: true });
                        count++;
                    }
                });

                try {
                    if (count > 0) {
                        await batch.commit();
                        alert(`¡Éxito! Se ingresaron ${count} instructores nuevos.`);
                        setBulkText("");
                        setShowBulkInstructorModal(false);
                    } else alert("No se reconoció el formato.");
                } catch (e) { alert("Error al guardar."); } finally { setLoading(false); }
            };

            const openEditModal = (instructor) => {
                setIsEditing(true);
                setOriginalCC(instructor.cc);
                setInstructorForm({ name: instructor.name, cc: instructor.cc, contract: instructor.contract || 'CONTRATISTA SENA' });
                setShowModal(true);
            };

            const handleSaveInstructor = async (e) => {
                e.preventDefault();
                setLoading(true);
                try {
                    const baseRef = db.collection('artifacts').doc(appId).collection('public').doc('data').collection('instructors');
                    if (isEditing && originalCC !== instructorForm.cc) await baseRef.doc(originalCC).delete();
                    await baseRef.doc(instructorForm.cc).set({ ...instructorForm, updatedAt: Date.now() }, { merge: true });
                    setShowModal(false);
                } catch (e) { alert('Error al guardar'); } finally { setLoading(false); }
            };

            const handleDeleteInstructor = async (cc) => {
                if (!confirm(`¿Eliminar instructor CC ${cc}?`)) return;
                try {
                    await db.collection('artifacts').doc(appId).collection('public').doc('data').collection('instructors').doc(cc).delete();
                } catch (e) { alert('Error al borrar'); }
            };

            const list = useMemo(() => {
                return instructors.map(inst => {
                    const key = `${month}-${inst.cc}`;
                    return { ...inst, ...(supervision[key] || { gcStatus: 'pending', gfStatus: 'pending', hours: 0 }) };
                }).filter(i => i.name.toLowerCase().includes(search.toLowerCase()) || i.cc.includes(search));
            }, [instructors, supervision, month, search]);

            if (!isLoggedIn) {
                return (
                    <div className="min-h-screen flex items-center justify-center bg-slate-950 p-6">
                        <div className="bg-white w-full max-w-sm p-8 rounded-[2.5rem] shadow-2xl text-center">
                            <div className="bg-orange-600 w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4 text-white font-black text-2xl shadow-lg italic">S</div>
                            <h1 className="text-2xl font-black uppercase tracking-tighter">SECOP Pro</h1>
                            <form onSubmit={handleLogin} className="mt-8 space-y-4 text-left">
                                <div className="flex bg-slate-100 p-1 rounded-2xl">
                                    {['supervisor', 'financiera'].map(r => (
                                        <button key={r} type="button" onClick={() => setLoginForm({...loginForm, role: r})}
                                            className={`flex-1 py-3 rounded-xl text-[10px] font-black uppercase transition-all ${loginForm.role === r ? 'bg-white text-slate-900 shadow-sm' : 'text-slate-400'}`}>
                                            {r}
                                        </button>
                                    ))}
                                </div>
                                <input type="password" placeholder="Código de Acceso" className="w-full p-4 bg-slate-50 border rounded-2xl outline-none focus:ring-2 focus:ring-orange-500 font-bold text-center"
                                    value={loginForm.password} onChange={e => setLoginForm({...loginForm, password: e.target.value})} />
                                <button type="submit" className="w-full bg-slate-900 text-white py-4 rounded-2xl font-black uppercase text-xs shadow-xl active:scale-95">Entrar</button>
                            </form>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen pb-20">
                    <nav className="bg-white/90 backdrop-blur-xl border-b sticky top-0 z-50 p-4 shadow-sm">
                        <div className="max-w-7xl mx-auto flex justify-between items-center gap-4">
                            <div className="flex items-center gap-3">
                                <div className="bg-orange-600 p-2 rounded-xl text-white font-black text-[10px] italic">S</div>
                                <h2 className="font-black text-xs uppercase hidden sm:block tracking-tighter">Gestión de Cobro</h2>
                            </div>
                            
                            <div className="flex items-center gap-2">
                                <button onClick={() => { setBulkText(""); setShowBulkHoursModal(true); }} className="bg-slate-900 text-white px-4 py-2.5 rounded-xl text-[9px] font-black uppercase hover:bg-black transition-all flex items-center gap-2 shadow-lg">
                                    <Icon name="ClipboardCopy" className="w-3.5 h-3.5" />
                                    Pegar Horas {month}
                                </button>

                                <button onClick={() => setView(view === 'dashboard' ? 'master' : 'dashboard')} className="px-4 py-2.5 bg-white border border-slate-200 text-slate-900 rounded-xl text-[9px] font-black uppercase shadow-sm hover:bg-slate-50 transition-all">
                                    {view === 'dashboard' ? 'Ver Instructores' : 'Ver Control'}
                                </button>
                                
                                <button onClick={() => setIsLoggedIn(false)} className="p-2.5 text-slate-300 hover:text-red-500 transition-colors">
                                    <Icon name="Power" className="w-5 h-5" />
                                </button>
                            </div>
                        </div>
                    </nav>

                    <main className="max-w-7xl mx-auto p-4 md:p-8">
                        {view === 'dashboard' ? (
                            <>
                                <div className="flex gap-2 overflow-x-auto pb-6 no-scrollbar">
                                    {MONTHS.map(m => (
                                        <button key={m} onClick={() => setMonth(m)}
                                            className={`px-6 py-3 rounded-2xl text-[10px] font-black uppercase transition-all whitespace-nowrap ${month === m ? 'bg-orange-600 text-white shadow-xl shadow-orange-100' : 'bg-white border text-slate-400 hover:bg-slate-50'}`}>
                                            {m}
                                        </button>
                                    ))}
                                </div>

                                <div className="bg-white rounded-[2.5rem] border overflow-hidden shadow-sm">
                                    <div className="p-6 md:p-8 border-b flex flex-wrap gap-4 items-center justify-between bg-slate-50/50">
                                        <div className="relative w-full md:w-96">
                                            <Icon name="Search" className="absolute left-4 top-1/2 -translate-y-1/2 text-slate-300 w-4 h-4" />
                                            <input type="text" placeholder="Buscar por nombre o CC..." className="w-full pl-12 pr-4 py-3.5 bg-white border rounded-2xl text-xs font-semibold outline-none focus:ring-2 focus:ring-orange-500 shadow-sm"
                                                value={search} onChange={e => setSearch(e.target.value)} />
                                        </div>
                                        <div className="text-[10px] font-black uppercase text-slate-500 bg-white border border-slate-100 px-4 py-2 rounded-full flex items-center gap-2">
                                            <div className="w-2 h-2 bg-green-500 rounded-full"></div>
                                            Panel {month}
                                        </div>
                                    </div>

                                    <div className="overflow-x-auto">
                                        <table className="w-full text-left">
                                            <thead className="bg-slate-50 text-[10px] font-black uppercase text-slate-500 tracking-wider">
                                                <tr>
                                                    <th className="p-6">Instructor</th>
                                                    <th className="p-6 text-center">Horas</th>
                                                    <th className="p-6">Supervisión (GC)</th>
                                                    <th className="p-6">Financiera (GF)</th>
                                                </tr>
                                            </thead>
                                            <tbody className="divide-y divide-slate-100">
                                                {list.length > 0 ? list.map(i => (
                                                    <tr key={i.id} className="hover:bg-slate-50/40 transition-colors group">
                                                        <td className="p-6">
                                                            <div className="font-bold text-slate-900 uppercase leading-none mb-1">{i.name}</div>
                                                            <div className="text-[9px] text-slate-400 font-mono tracking-tight uppercase">CC {i.cc} • {i.contract}</div>
                                                        </td>
                                                        <td className="p-6 text-center">
                                                            <div className={`inline-block px-3 py-1 rounded-full text-xs font-black ${i.hours >= 160 ? 'bg-green-100 text-green-700' : 'bg-slate-100 text-slate-600'}`}>
                                                                {i.hours || 0}h
                                                            </div>
                                                        </td>
                                                        <td className="p-6">
                                                            <select disabled={role !== 'supervisor'} value={i.gcStatus} onChange={(e) => handleUpdateStatus(i.cc, 'gcStatus', e.target.value)}
                                                                className={`w-full p-3 rounded-xl font-black text-[10px] uppercase border transition-all ${i.gcStatus === 'verified' ? 'bg-blue-600 text-white border-blue-700' : 'bg-white text-slate-400 border-slate-200 cursor-pointer hover:border-blue-400'}`}>
                                                                <option value="pending">Pendiente</option>
                                                                <option value="verified">Aprobado ✓</option>
                                                                <option value="rejected">Rechazado ✕</option>
                                                            </select>
                                                        </td>
                                                        <td className="p-6">
                                                            <select disabled={role !== 'financiera'} value={i.gfStatus} onChange={(e) => handleUpdateStatus(i.cc, 'gfStatus', e.target.value)}
                                                                className={`w-full p-3 rounded-xl font-black text-[10px] uppercase border transition-all ${i.gfStatus === 'verified' ? 'bg-indigo-600 text-white border-indigo-700' : 'bg-white text-slate-400 border-slate-200 cursor-pointer hover:border-indigo-400'}`}>
                                                                <option value="pending">Pendiente</option>
                                                                <option value="verified">Validado ✓</option>
                                                                <option value="rejected">Rechazado ✕</option>
                                                            </select>
                                                        </td>
                                                    </tr>
                                                )) : (
                                                    <tr><td colSpan="4" className="p-20 text-center text-slate-300 font-black uppercase text-xs">Sin registros</td></tr>
                                                )}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </>
                        ) : (
                            <div className="bg-white rounded-[2.5rem] border p-8 shadow-sm">
                                <div className="flex flex-wrap justify-between items-center mb-10 gap-4 border-b pb-8">
                                    <div>
                                        <h2 className="font-black text-3xl uppercase tracking-tighter text-slate-900 leading-none">Instructores</h2>
                                        <p className="text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-2">Maestro central de personal</p>
                                    </div>
                                    <div className="flex gap-2">
                                        <button onClick={() => { setBulkText(""); setShowBulkInstructorModal(true); }} className="bg-slate-100 text-slate-600 px-6 py-4 rounded-2xl text-[10px] font-black uppercase hover:bg-slate-200 transition-all flex items-center gap-2">
                                            <Icon name="ClipboardList" className="w-4 h-4" /> Pegado Masivo
                                        </button>
                                        <button onClick={() => { setIsEditing(false); setInstructorForm({name:'', cc:'', contract:'CONTRATISTA SENA'}); setShowModal(true); }} className="bg-orange-600 text-white px-6 py-4 rounded-2xl text-[10px] font-black uppercase shadow-xl hover:bg-orange-700 transition-all flex items-center gap-2 shadow-orange-100">
                                            <Icon name="Plus" className="w-4 h-4" /> Nuevo Manual
                                        </button>
                                    </div>
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    {instructors.map(i => (
                                        <div key={i.id} className="p-6 border rounded-[2rem] bg-slate-50/50 hover:bg-white transition-all border-slate-100 group">
                                            <div className="font-black text-slate-900 mb-1 uppercase leading-tight pr-8">{i.name}</div>
                                            <div className="text-[10px] font-mono text-slate-400">CC {i.cc} • {i.contract}</div>
                                            <div className="mt-6 flex gap-2">
                                                <button onClick={() => openEditModal(i)} className="flex-1 py-3 bg-white border rounded-xl text-[9px] font-black uppercase text-slate-500 hover:border-orange-500 hover:text-orange-600 transition-all shadow-sm">Editar</button>
                                                <button onClick={() => handleDeleteInstructor(i.cc)} className="p-3 text-slate-200 hover:text-red-500 transition-colors"><Icon name="Trash2" className="w-4 h-4" /></button>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}
                    </main>

                    {/* MODAL PEGAR HORAS MASIVO */}
                    {showBulkHoursModal && (
                        <div className="fixed inset-0 z-[110] flex items-center justify-center p-6">
                            <div className="absolute inset-0 bg-slate-950/80 backdrop-blur-md" onClick={() => setShowBulkHoursModal(false)}></div>
                            <div className="relative bg-white w-full max-w-2xl p-8 rounded-[2.5rem] shadow-2xl animate-in fade-in slide-in-from-bottom-4">
                                <h3 className="text-xl font-black uppercase tracking-tight mb-4 text-slate-900">Carga Masiva de Horas - {month}</h3>
                                <p className="text-[10px] font-bold text-slate-400 uppercase mb-4 tracking-widest leading-relaxed">Pega un listado con dos columnas: <span className="text-orange-600">Cédula</span> y <span className="text-orange-600">Horas</span>. <br/>Nota: El estado de Financiera (GF) siempre quedará pendiente para validación manual.</p>
                                
                                <textarea 
                                    className="w-full h-64 p-6 bg-slate-50 border border-slate-100 rounded-[1.5rem] outline-none focus:ring-2 focus:ring-orange-500 font-mono text-xs leading-relaxed"
                                    placeholder="Ejemplo (CC Horas):&#10;12345678 160&#10;87654321 40"
                                    value={bulkText}
                                    onChange={e => setBulkText(e.target.value)}
                                ></textarea>
                                
                                <div className="flex gap-3 mt-6">
                                    <button onClick={() => setShowBulkHoursModal(false)} className="flex-1 py-4 bg-slate-100 text-slate-400 rounded-2xl font-black uppercase text-[10px]">Cancelar</button>
                                    <button onClick={handleBulkHoursSave} disabled={loading} className="flex-1 py-4 bg-slate-900 text-white rounded-2xl font-black uppercase text-[10px] shadow-xl hover:bg-black disabled:opacity-50">
                                        {loading ? 'Procesando...' : 'Actualizar Horas'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* MODAL PEGAR INSTRUCTORES MASIVO */}
                    {showBulkInstructorModal && (
                        <div className="fixed inset-0 z-[110] flex items-center justify-center p-6">
                            <div className="absolute inset-0 bg-slate-950/80 backdrop-blur-md" onClick={() => setShowBulkInstructorModal(false)}></div>
                            <div className="relative bg-white w-full max-w-2xl p-8 rounded-[2.5rem] shadow-2xl animate-in fade-in slide-in-from-bottom-4">
                                <h3 className="text-xl font-black uppercase tracking-tight mb-4">Pegado Masivo de Instructores</h3>
                                <p className="text-[10px] font-bold text-slate-400 uppercase mb-4 tracking-widest leading-relaxed">Cada línea debe contener el Nombre y la Cédula (CC).</p>
                                
                                <textarea 
                                    className="w-full h-64 p-6 bg-slate-50 border border-slate-100 rounded-[1.5rem] outline-none focus:ring-2 focus:ring-orange-500 font-mono text-xs leading-relaxed"
                                    placeholder="Ejemplo:&#10;PEDRO PEREZ 12345678&#10;MARIA LOPEZ 87654321"
                                    value={bulkText}
                                    onChange={e => setBulkText(e.target.value)}
                                ></textarea>
                                
                                <div className="flex gap-3 mt-6">
                                    <button onClick={() => setShowBulkInstructorModal(false)} className="flex-1 py-4 bg-slate-100 text-slate-400 rounded-2xl font-black uppercase text-[10px]">Cancelar</button>
                                    <button onClick={handleBulkInstructorSave} disabled={loading} className="flex-1 py-4 bg-orange-600 text-white rounded-2xl font-black uppercase text-[10px] shadow-xl hover:bg-orange-700 disabled:opacity-50">
                                        {loading ? 'Procesando...' : 'Ingresar al Maestro'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* MODAL EDICIÓN MANUAL */}
                    {showModal && (
                        <div className="fixed inset-0 z-[100] flex items-center justify-center p-6">
                            <div className="absolute inset-0 bg-slate-950/60" onClick={() => setShowModal(false)}></div>
                            <div className="relative bg-white w-full max-w-md p-8 rounded-[2.5rem] shadow-2xl">
                                <h3 className="text-xl font-black uppercase mb-6">{isEditing ? 'Editar' : 'Añadir'} Instructor</h3>
                                <form onSubmit={handleSaveInstructor} className="space-y-4">
                                    <div className="space-y-1">
                                        <label className="text-[10px] font-black uppercase text-slate-400 ml-2">Nombre</label>
                                        <input type="text" className="w-full p-4 bg-slate-50 border rounded-2xl font-bold uppercase" value={instructorForm.name} onChange={e => setInstructorForm({...instructorForm, name: e.target.value.toUpperCase()})} />
                                    </div>
                                    <div className="space-y-1">
                                        <label className="text-[10px] font-black uppercase text-slate-400 ml-2">CC</label>
                                        <input type="text" className="w-full p-4 bg-slate-50 border rounded-2xl font-bold" value={instructorForm.cc} onChange={e => setInstructorForm({...instructorForm, cc: e.target.value.replace(/\D/g,'')})} />
                                    </div>
                                    <div className="flex gap-3 pt-6">
                                        <button type="button" onClick={() => setShowModal(false)} className="flex-1 py-4 bg-slate-100 text-slate-400 rounded-2xl font-black uppercase text-[10px]">Cerrar</button>
                                        <button type="submit" disabled={loading} className="flex-1 py-4 bg-orange-600 text-white rounded-2xl font-black uppercase text-[10px] shadow-xl">Guardar</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
